<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Kanban Simple</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .kanban-card {
            background: #fff;
            border: 1px solid #ccc;
            padding: 15px;
            margin: 10px;
            cursor: pointer;
            user-select: none;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .kanban-card:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .custom-modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: rgba(0,0,0,0.5);
            display: none;
        }
        .custom-modal {
            background: white;
            margin: 20px auto;
            padding: 0;
            max-width: 900px;
            width: 90%;
            border-radius: 14px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
            overflow: hidden;
        }
        .custom-modal-header {
            background: linear-gradient(135deg, #6BB2C8, #90C5D8);
            color: white;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .custom-modal-title {
            margin: 0;
            font-weight: 700;
            font-size: 18px;
        }
        .custom-modal-close {
            border: none;
            background: transparent;
            font-size: 24px;
            color: white;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
        }
        .custom-modal-close:hover {
            background-color: rgba(255,255,255,0.2);
        }
        .custom-modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }
        .custom-modal-row {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }
        .custom-modal-col {
            flex: 1;
        }
        .custom-modal-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        .custom-modal-input,
        .custom-modal-select,
        .custom-modal-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #fff;
            font-size: 14px;
            box-sizing: border-box;
        }
        .custom-modal-textarea {
            resize: vertical;
            min-height: 80px;
        }
        .custom-modal-footer {
            background: #f9fafb;
            padding: 16px 20px;
            border-top: 1px solid rgba(0,0,0,0.06);
            display: flex;
            gap: 12px;
            justify-content: space-between;
        }
        .custom-btn {
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            min-width: 100px;
        }
        .custom-btn-primary {
            background: linear-gradient(135deg, #6BB2C8, #90C5D8);
            color: white;
        }
        .custom-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(107,178,200,0.3);
        }
        .custom-btn-secondary {
            background: #e5e7eb;
            color: #111827;
        }
        .custom-btn-secondary:hover {
            background: #d1d5db;
            transform: translateY(-1px);
        }
        .loading-text {
            text-align: center;
            padding: 20px;
            color: #6b7280;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Test Kanban Edit Modal - Simple Version</h1>
    
    <div class="kanban-card" data-id="123">
        <h3>Test Card 1</h3>
        <p>Double click me to open edit modal</p>
        <small>ID: 123</small>
    </div>

    <script>
        // Test functions
        function showSuccess(message) {
            alert('Success: ' + message);
        }
        
        function showError(message) {
            alert('Error: ' + message);
            console.error('Error:', message);
        }
        
        function closeEditModal() {
            const modal = document.getElementById('editActivityModal');
            if (modal) {
                modal.remove();
            }
        }
        
        function openEditModal(activityId) {
            console.log('Opening edit modal for activity:', activityId);
            
            if (!activityId) {
                showError('Invalid activity ID');
                return;
            }
            
            // Remove existing modal if any
            const existingModal = document.getElementById('editActivityModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Create modal HTML
            const modalHTML = `
                <div id="editActivityModal" class="custom-modal-overlay" style="display: block;">
                    <div class="custom-modal">
                        <div class="custom-modal-header">
                            <h5 class="custom-modal-title">Edit Activity ${activityId}</h5>
                            <button type="button" class="custom-modal-close" onclick="closeEditModal()">&times;</button>
                        </div>
                        <div class="custom-modal-body">
                            <div id="editLoading" class="loading-text">Loading...</div>
                            <div id="editFormContent" style="display: none;">
                                <form id="editActivityForm">
                                    <div class="custom-modal-row">
                                        <div class="custom-modal-col">
                                            <label class="custom-modal-label">No</label>
                                            <input type="number" name="no" id="edit_no" class="custom-modal-input" readonly value="123">
                                        </div>
                                        <div class="custom-modal-col">
                                            <label class="custom-modal-label">Status *</label>
                                            <select name="status" id="edit_status" class="custom-modal-select" required>
                                                <option value="Open">Open</option>
                                                <option value="On Progress">On Progress</option>
                                                <option value="Done">Done</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="custom-modal-row">
                                        <div class="custom-modal-col">
                                            <label class="custom-modal-label">Information Date *</label>
                                            <input type="date" name="information_date" id="edit_information_date" class="custom-modal-input" required>
                                        </div>
                                        <div class="custom-modal-col">
                                            <label class="custom-modal-label">Priority *</label>
                                            <select name="priority" id="edit_priority" class="custom-modal-select" required>
                                                <option value="Urgent">Urgent</option>
                                                <option value="Normal">Normal</option>
                                                <option value="Low">Low</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="custom-modal-row">
                                        <div class="custom-modal-col">
                                            <label class="custom-modal-label">Application *</label>
                                            <select name="application" id="edit_application" class="custom-modal-select" required>
                                                <option value="">-</option>
                                                <option value="Power FO">Power FO</option>
                                                <option value="My POS">My POS</option>
                                                <option value="My MGR">My MGR</option>
                                            </select>
                                        </div>
                                        <div class="custom-modal-col">
                                            <label class="custom-modal-label">Type</label>
                                            <select name="type" id="edit_type" class="custom-modal-select">
                                                <option value="Setup">Setup</option>
                                                <option value="Issue">Issue</option>
                                                <option value="Question">Question</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="custom-modal-row">
                                        <div class="custom-modal-col" style="grid-column: 1 / -1;">
                                            <label class="custom-modal-label">Description</label>
                                            <textarea name="description" id="edit_description" class="custom-modal-textarea" rows="3"></textarea>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="custom-modal-footer">
                            <button type="button" class="custom-btn custom-btn-primary" onclick="testFormData()">Update</button>
                            <button type="button" class="custom-btn custom-btn-secondary" onclick="closeEditModal()">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            // Insert modal into DOM
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Simulate loading data
            setTimeout(() => {
                document.getElementById('editLoading').style.display = 'none';
                document.getElementById('editFormContent').style.display = 'block';
                
                // Set some test data
                document.getElementById('edit_information_date').value = '2024-01-15';
                document.getElementById('edit_priority').value = 'Normal';
                document.getElementById('edit_application').value = 'Power FO';
                document.getElementById('edit_type').value = 'Issue';
                document.getElementById('edit_description').value = 'This is a test description.';
                
                console.log('Modal loaded with test data');
            }, 1000);
        }
        
        function testFormData() {
            const form = document.getElementById('editActivityForm');
            const formData = new FormData(form);
            
            console.log('Form data:');
            for (let [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }
            
            showSuccess('Form data logged to console. Check Developer Tools (F12) > Console');
        }
        
        // Initialize card events
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing test kanban...');
            
            const cards = document.querySelectorAll('.kanban-card');
            console.log('Found', cards.length, 'test cards');
            
            cards.forEach(function(card, index) {
                console.log(`Setting up test card ${index + 1}:`, card.dataset.id);
                
                card.addEventListener('dblclick', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const cardId = this.dataset.id;
                    console.log('Double click on test card:', cardId);
                    
                    if (cardId) {
                        openEditModal(cardId);
                    } else {
                        showError('Test card ID tidak valid');
                    }
                });
            });
            
            console.log('Test kanban initialized successfully');
        });
    </script>
</body>
</html>
